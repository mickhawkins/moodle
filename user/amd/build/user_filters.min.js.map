{"version":3,"sources":["../src/user_filters.js"],"names":["init","uniqid","setDropdownValue","e","dropdownType","target","parentNode","querySelector","id","document","getElementById","innerText","value","getAttribute","querySelectorAll","forEach","dropdown","addEventListener","chooseOption","window","console","log","toggleFilterDropdown","dropdownList","classList","remove","filterdiv"],"mappings":"4IAiCoB,QAAPA,CAAAA,IAAO,CAACC,CAAD,CAAY,CAU5B,GAAMC,CAAAA,CAAgB,CAAG,SAAAC,CAAC,CAAI,CAC1B,GAAMC,CAAAA,CAAY,CAAGD,CAAC,CAACE,MAAF,CAASC,UAAT,CAAoBA,UAApB,CAA+BC,aAA/B,CAA6C,QAA7C,EAAuDC,EAA5E,CAGAC,QAAQ,CAACC,cAAT,CAAwBN,CAAxB,EAAsCO,SAAtC,CAAkDR,CAAC,CAACE,MAAF,CAASM,SAA3D,CACAF,QAAQ,CAACC,cAAT,WAA2BN,CAA3B,eAAoDQ,KAApD,CAA4DT,CAAC,CAACE,MAAF,CAASQ,YAAT,CAAsB,YAAtB,CAE/D,CAPD,CAUAJ,QAAQ,CAACK,gBAAT,CAA0B,mCAA1B,EAA+DC,OAA/D,CAAuE,SAACC,CAAD,CAAc,CACjFA,CAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmCf,CAAnC,CACH,CAFD,EApB4B,GAwBtBgB,CAAAA,CAAY,CAAG,SAAAf,CAAC,CAAI,CACtBgB,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBlB,CAAC,CAACE,MAAF,CAASQ,YAAT,CAAsB,YAAtB,CAAnB,CAGH,CA5B2B,CA8BtBS,CAAoB,CAAG,SAAAnB,CAAC,CAAI,CAC9B,GAAMoB,CAAAA,CAAY,CAAGpB,CAAC,CAACE,MAAF,CAASC,UAAT,CAAoBC,aAApB,CAAkC,IAAlC,CAArB,CAMAgB,CAAY,CAACN,gBAAb,CAA8B,OAA9B,CAAuCC,CAAvC,EAEAK,CAAY,CAACC,SAAb,CAAuBC,MAAvB,CAA8B,QAA9B,CACH,CAxC2B,CA0CtBC,CAAS,CAAGjB,QAAQ,CAACC,cAAT,WAA2BT,CAA3B,sBA1CU,CA4C5ByB,CAAS,CAACnB,aAAV,CAAwB,sBAAxB,EAA8CU,gBAA9C,CAA+D,OAA/D,CAAwEK,CAAxE,EACAI,CAAS,CAACnB,aAAV,CAAwB,MAAxB,EAAgCU,gBAAhC,CAAiD,OAAjD,CAA0DK,CAA1D,CAEH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module responsible for handling forum summary report filters.\n *\n * @module     core_user/user_filter\n * @package    core_user\n * @copyright  2020 Michael Hawkins <michaelh@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n//TODO: CLEANUP imports\n//import $ from 'jquery';\n//import Popper from 'core/popper';\n//import CustomEvents from 'core/custom_interaction_events';\n//import Selectors from 'forumreport_summary/selectors';\n//import Y from 'core/yui';\n//import Ajax from 'core/ajax';\n//import KeyCodes from 'core/key_codes';\n\nexport const init = (uniqid) => {\n\n//TODO: Most of this is probably generic enough that it can be initialised in the outer filter,\n//          rather than once per filter (so uniqid wouldnt be passed in).\n//TODO: Need to remember that additional ones will be added dynamically, and will need the\n//       same handlers applied to them, so it should support that.\n//TODO: Any of the type in search stuff / handling of the selection probably need to be\n//      imported from a new file (or at least set as a separate const).\n\n    // Handler for setting values for single dropdowns.\n    const setDropdownValue = e => {\n        const dropdownType = e.target.parentNode.parentNode.querySelector('button').id;\n\n        // Display the selection and set the hidden value.\n        document.getElementById(dropdownType).innerText = e.target.innerText;\n        document.getElementById(`${dropdownType}-selected`).value = e.target.getAttribute('data-value');\n\n    };\n\n    // Set listener on each filter dropdown menu.\n    document.querySelectorAll('.dropdown-menu.user-filter-select').forEach((dropdown) => {\n        dropdown.addEventListener('click', setDropdownValue);\n    });\n\n    const chooseOption = e => {\n        window.console.log(e.target.getAttribute('data-value'));\n        //TODO: This is fetching the correct value. The template will need a select to replace the \"type or select\"\n                //with in the UI, and then re-appear if they click it?\n    };\n\n    const toggleFilterDropdown = e => {\n        const dropdownList = e.target.parentNode.querySelector('ul');\n\n        //TODO: This is the start of selecting the filter type, where it shows a dropdown when selected,\n                //there's also the case of the value being selected on the next dropdown, which adds the\n                //little removable tag bits. Need to see if they can be differentiated (maybe a data- tag) that\n            //allows generic code here to set one of two different event listeners, depending which type it is.\n        dropdownList.addEventListener('click', chooseOption);\n\n        dropdownList.classList.remove('hidden');\n    };\n\n    const filterdiv = document.getElementById(`${uniqid}-TODOfilter-types`);\n\n    filterdiv.querySelector('input[type=\"text\"]').addEventListener('focus', toggleFilterDropdown);\n    filterdiv.querySelector('span').addEventListener('click', toggleFilterDropdown);\n\n};\n"],"file":"user_filters.min.js"}